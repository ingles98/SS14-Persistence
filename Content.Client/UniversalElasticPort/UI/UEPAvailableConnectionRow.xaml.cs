using Content.Client.UniversalElasticPort.BUI;
using Content.Shared.UniversalElasticPort.BUIStates;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.Controls;
using Robust.Client.UserInterface.XAML;

namespace Content.Client.UniversalElasticPort.UI;

[GenerateTypedNameReferences]
public sealed partial class UEPAvailableConnectionRow : PanelContainer
{
    private UEPAvailableConnection _conn;

    public UEPAvailableConnectionRow(UEPBoundUserInterface bui, UEPAvailableConnection conn)
    {
        _conn = conn;
        RobustXamlLoader.Load(this);

        PlugName.Text = conn.Name;
        PlugDistance.Text = $"({conn.Distance:F1}m)";

        ConnectBtn.Disabled = conn.Occupied;
        if (conn.Occupied)
        {
            ConnectBtn.Text = "Occupied";
            ConnectBtn.Modulate = Color.Red;
        }
        ConnectBtn.OnPressed += (args) =>
        {
            if (bui == null) return;
            bui.SendMessage(new UEPConnectMessage(conn.Entity));
        };
        // PlugOccupied.Text = conn.Occupied.ToString();
    }

}
